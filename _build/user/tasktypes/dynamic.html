

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Dynamic Tasks &mdash; Flyte 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Sidecar Tasks" href="sidecar.html" />
    <link rel="prev" title="Spark Task" href="spark.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Flyte
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Flyte Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/index.html">Flyte Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/index.html">Flyte Features</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Flyte Task Types</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="container.html">Container Task</a></li>
<li class="toctree-l3"><a class="reference internal" href="hive.html">Hive Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="spark.html">Spark Task</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Dynamic Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="sidecar.html">Sidecar Tasks</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../administrator/index.html">Administrator Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributor/index.html">Contributor Docs</a></li>
</ul>
<p class="caption"><span class="caption-text">Generated Documentation from Source</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/lyft/flyteidl">Flyte Language Specification</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Flyte</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User docs</a> &raquo;</li>
        
          <li><a href="index.html">Flyte Task Types</a> &raquo;</li>
        
      <li>Dynamic Tasks</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user/tasktypes/dynamic.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dynamic-tasks">
<span id="dynamic-task-type"></span><h1>Dynamic Tasks<a class="headerlink" href="#dynamic-tasks" title="Permalink to this headline">¶</a></h1>
<p>Flyte offers many task types to support a varity of use-cases that are all based on statically defining what
those tasks do beforehand. Dynamic Task type is the only exception to this rule where the system knows very little
about what the nature of the workload that will be executed until execution time.</p>
<dl class="simple">
<dt>A Dynamic task is executed as follows:</dt><dd><ul class="simple">
<li><p>A generator step; This step runs like a <a class="reference internal" href="container.html#container-task-type"><span class="std std-ref">Container Task</span></a>. The expected outcome of this step is a <a class="reference internal" href="../concepts/dynamic_spec.html#concepts-dynamic-spec"><span class="std std-ref">dynamic job spec</span></a>.</p></li>
<li><p>Execute the dynamic job spec; The spec can contain any of the flyte supported workflow nodes. One or more of these nodes might contain other
dynamic tasks. In which case, it’ll get recursively executed.</p></li>
<li><p>Assemble final outputs of the task.</p></li>
</ul>
</dd>
<dt>Some of the potential use cases:</dt><dd><ul class="simple">
<li><p>Launching arbitrary workflows/tasks:
You might build a workflow where one of its tasks chooses and executes a launchplan based on values passed as inputs to the task.</p></li>
<li><p>Dynamically creating a workflow
If the desired set of nodes/tasks that need to be executed is controlled by inputs, you can use dynamic tasks to build
a workflow spec at execution time and yield that for it to be executed.</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Dynamic task example</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="nd">@inputs</span><span class="p">(</span><span class="n">tasks_count</span><span class="o">=</span><span class="n">Types</span><span class="o">.</span><span class="n">Integer</span><span class="p">)</span>
 <span class="nd">@outputs</span><span class="p">(</span><span class="n">out</span><span class="o">=</span><span class="p">[</span><span class="n">Types</span><span class="o">.</span><span class="n">Integer</span><span class="p">])</span>
 <span class="nd">@dynamic_task</span><span class="p">(</span><span class="n">cache_version</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
 <span class="k">def</span> <span class="nf">generate_others</span><span class="p">(</span><span class="n">workflow_parameters</span><span class="p">,</span> <span class="n">tasks_count</span><span class="p">,</span> <span class="n">out</span><span class="p">):</span>
   <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
   <span class="c1"># Launch an arbitrary number of tasks based on the input tasks_count</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tasks_count</span><span class="p">):</span>
     <span class="n">task</span> <span class="o">=</span> <span class="n">other_task</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
     <span class="k">yield</span> <span class="n">task</span>
     <span class="c1"># Define how to assemble the final result</span>
     <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">other_task_out</span><span class="p">)</span>

   <span class="c1"># Define how to set the final result of the task</span>
   <span class="n">out</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt>A few notes about how this task will run:</dt><dd><ul class="simple">
<li><p>This code will be executed only once. Based on the way outputs are declared, <a class="reference internal" href="../../contributor/language/index.html#language-bindings"><span class="std std-ref">Bindings</span></a> will
be created to instruct the system on how to assemble the final outputs after all yielded tasks are executed.</p></li>
<li><p>Manipulating Outputs of the yielded tasks is not supported. Think of this step as a <a class="reference external" href="https://en.wikipedia.org/wiki/MapReduce">Map Concept</a>. If a simple reduce is
required, it’ll have to happen as a separate task that consumes the assembled outputs here.</p></li>
<li><p>There is a restriction on the size of individual tasks outputs as well as on the final output of this task. If large outputs
are desired, consider using Blob types.</p></li>
</ul>
</dd>
</dl>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sidecar.html" class="btn btn-neutral float-right" title="Sidecar Tasks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="spark.html" class="btn btn-neutral float-left" title="Spark Task" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Flyte Authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>